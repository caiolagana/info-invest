{"ast":null,"code":"import _asyncToGenerator from \"/home/caiolagana/Documents/dotNET/info-invest/ClientApp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { registerLocaleData } from '@angular/common';\nimport localeBr from '@angular/common/locales/br';\nimport { cgrupos } from '../cadastro-ativos/cadastro-ativos.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\n\nconst _c0 = function (a0, a1, a2) {\n  return {\n    nome: a0,\n    idade: a1,\n    saldo: a2\n  };\n};\n\nfunction CarteiraComponent_ng_container_6_mat_option_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-option\", 9);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const cliente_r3 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", i0.ɵɵpureFunction3(2, _c0, cliente_r3.nome, cliente_r3.idade, cliente_r3.saldo));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", cliente_r3.nome, \" \");\n  }\n}\n\nfunction CarteiraComponent_ng_container_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, CarteiraComponent_ng_container_6_mat_option_1_Template, 2, 6, \"mat-option\", 8);\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.clientes);\n  }\n}\n\nconst _c1 = function (a0, a1) {\n  return {\n    nome: a0,\n    grupo: a1\n  };\n};\n\nfunction CarteiraComponent_ng_container_22_mat_option_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-option\", 9);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ativo_r5 = ctx.$implicit;\n    const ctx_r4 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"value\", i0.ɵɵpureFunction2(3, _c1, ativo_r5.nome, ctx_r4.codigoGrupo(ativo_r5.grupo)));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate2(\" \", ativo_r5.nome, \" / \", ativo_r5.grupo, \" \");\n  }\n}\n\nfunction CarteiraComponent_ng_container_22_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, CarteiraComponent_ng_container_22_mat_option_1_Template, 2, 6, \"mat-option\", 8);\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.ativos);\n  }\n}\n\nregisterLocaleData(localeBr, 'br');\nexport class CarteiraComponent {\n  constructor(http) {\n    this.http = http;\n    this.fixa = null;\n    this.variavel = null;\n    this.fundos = null;\n    this.acoes = null;\n    this.tesouro = null;\n    this.poupanca = null;\n    this.cripto = null;\n    this.clientes = [];\n    this.cliente = \"Ana Pereira\";\n    this.__cliente__ = null; //nome = \"Ana Pereira\";\n\n    this.idade = 28;\n    this.saldo = 0;\n    this.x = new cgrupos();\n    this.grupos = this.x.lista;\n    this.ativos = [];\n    this.valorCompra = null;\n    this.ativoCompra = null;\n    this.carregaCliente();\n  }\n\n  carregaCliente() {\n    this.recuperaInvestimentos();\n    this.recuperaAtivos();\n    this.recuperaSaldo(this.cliente);\n    this.recuperaClientes();\n  }\n\n  ngOnInit() {}\n\n  recuperaClientes() {\n    this.http.get('clientes').subscribe(clientes => this.clientes = clientes);\n  }\n\n  atualizaSaldo(saldo, cliente) {\n    let cmd = \"UPDATE clientes SET saldo = \" + saldo + \" WHERE nome = '\" + cliente + \"';\";\n    this.postDB([cmd, 'w']).subscribe(() => {});\n  }\n\n  recuperaSaldo(cliente) {\n    let cmd = \"SELECT saldo FROM clientes WHERE nome = '\" + cliente + \"';\";\n    this.postDB([cmd, 'r']).subscribe(r => {\n      this.saldo = parseFloat(r[0]);\n    });\n  }\n\n  recuperaInvestimentos() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      _this.recuperaInvestimento('fixa', _this.cliente);\n\n      _this.recuperaInvestimento('variavel', _this.cliente);\n\n      _this.recuperaInvestimento('fundos', _this.cliente);\n\n      _this.recuperaInvestimento('acoes', _this.cliente);\n\n      _this.recuperaInvestimento('tesouro', _this.cliente);\n\n      _this.recuperaInvestimento('poupanca', _this.cliente);\n\n      _this.recuperaInvestimento('cripto', _this.cliente); //await new Promise(f => setTimeout(f, 500));\n      //this.atualizaSaldo(this.saldo.toString(), this.cliente!);\n      //console.log('saldo: ' + this.saldo);\n\n    })();\n  }\n\n  Vender() {\n    if (this.ativoCompra != null && this.valorCompra != null) {\n      let venda = {\n        cliente: this.cliente,\n        ativo: this.ativoCompra.nome,\n        grupo: this.ativoCompra.grupo,\n        quantidade: 1,\n        valor: this.valorCompra\n      };\n      this.saldo -= venda.quantidade * venda.valor;\n      let cmdSaldo = \"UPDATE clientes SET saldo = \" + this.saldo + \" WHERE nome = '\" + this.cliente + \"';\";\n      this.postDB([cmdSaldo, 'w']).subscribe(() => {}); //let cmdAtivo: string =  \"UPDATE \" + venda.grupo + \" SET valor = \" + this.saldo + \" WHERE cliente = '\" + this.cliente + \"';\";\n    }\n  }\n\n  Comprar() {\n    if (this.ativoCompra != null && this.valorCompra != null) {\n      let compra = {\n        cliente: this.cliente,\n        ativo: this.ativoCompra.nome,\n        grupo: this.ativoCompra.grupo,\n        quantidade: 1,\n        valor: this.valorCompra\n      };\n      this.enviaCompra(compra).subscribe(() => {\n        this.recuperaInvestimento(this.ativoCompra.grupo, this.cliente);\n        this.saldo += compra.quantidade * compra.valor;\n        this.atualizaSaldo(this.saldo.toString(), this.cliente);\n        this.valorCompra = null;\n        this.ativoCompra = null;\n      });\n    }\n  }\n\n  codigoGrupo(gr) {\n    let cod = '';\n\n    switch (gr) {\n      case 'Renda Fixa':\n        cod = 'fixa';\n        break;\n\n      case 'Renda Variável':\n        cod = 'variavel';\n        break;\n\n      case 'Fundos':\n        cod = 'fundos';\n        break;\n\n      case 'Ações':\n        cod = 'acoes';\n        break;\n\n      case 'Tesouro Direto':\n        cod = 'tesouro';\n        break;\n\n      case 'Poupança':\n        cod = 'poupanca';\n        break;\n\n      case 'Criptomoedas':\n        cod = 'cripto';\n        break;\n    }\n\n    return cod;\n  }\n\n  enviaCompra(compra) {\n    return this.http.post('comprar', compra);\n  }\n\n  postDB(cmd) {\n    return this.http.post('db', cmd);\n  }\n\n  recuperaInvestimento(grupo, cliente) {\n    let res = null;\n    this.send(grupo, cliente).subscribe(inv => {\n      switch (grupo) {\n        case 'fixa':\n          this.fixa = inv;\n          break;\n\n        case 'variavel':\n          this.variavel = inv;\n          break;\n\n        case 'fundos':\n          this.fundos = inv;\n          break;\n\n        case 'acoes':\n          this.acoes = inv;\n          break;\n\n        case 'tesouro':\n          this.tesouro = inv;\n          break;\n\n        case 'poupanca':\n          this.poupanca = inv;\n          break;\n\n        case 'cripto':\n          this.cripto = inv;\n          break;\n      }\n    });\n  }\n\n  send(grupo, cliente) {\n    return this.http.post('carteira', [grupo, cliente]);\n  }\n\n  somaSaldo(invs) {\n    let soma = 0;\n    invs.forEach(inv => soma += inv.quantidade * inv.valor);\n    return soma;\n  }\n\n  recuperaAtivos() {\n    this.http.get('ativos').subscribe(ativos => this.ativos = ativos);\n  }\n\n}\n\nCarteiraComponent.ɵfac = function CarteiraComponent_Factory(t) {\n  return new (t || CarteiraComponent)(i0.ɵɵdirectiveInject(i1.HttpClient));\n};\n\nCarteiraComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: CarteiraComponent,\n  selectors: [[\"app-carteira\"]],\n  decls: 34,\n  vars: 27,\n  consts: [[\"appearance\", \"fill\"], [\"name\", \"escolheClienteCompra\", 3, \"ngModel\", \"ngModelChange\"], [4, \"ngIf\"], [1, \"example-form\"], [\"matInput\", \"\", \"name\", \"valorCompra\", 3, \"ngModel\", \"ngModelChange\"], [\"name\", \"ativoCompra\", 3, \"ngModel\", \"ngModelChange\"], [1, \"btn\", \"btn-primary\", 3, \"click\"], [3, \"investimentos\", \"titulo\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [3, \"value\"]],\n  template: function CarteiraComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"h1\");\n      i0.ɵɵtext(1, \"Carteira do cliente\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(2, \"mat-form-field\", 0)(3, \"mat-label\");\n      i0.ɵɵtext(4, \"Cliente\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(5, \"mat-select\", 1);\n      i0.ɵɵlistener(\"ngModelChange\", function CarteiraComponent_Template_mat_select_ngModelChange_5_listener($event) {\n        return ctx.__cliente__ = $event;\n      });\n      i0.ɵɵtemplate(6, CarteiraComponent_ng_container_6_Template, 2, 1, \"ng-container\", 2);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵtext(7);\n      i0.ɵɵelementStart(8, \"h1\");\n      i0.ɵɵtext(9);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(10, \"h1\");\n      i0.ɵɵtext(11);\n      i0.ɵɵpipe(12, \"number\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(13, \"form\", 3)(14, \"mat-form-field\", 0)(15, \"mat-label\");\n      i0.ɵɵtext(16, \"Valor R$\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(17, \"input\", 4);\n      i0.ɵɵlistener(\"ngModelChange\", function CarteiraComponent_Template_input_ngModelChange_17_listener($event) {\n        return ctx.valorCompra = $event;\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(18, \"mat-form-field\", 0)(19, \"mat-label\");\n      i0.ɵɵtext(20, \"Ativo\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(21, \"mat-select\", 5);\n      i0.ɵɵlistener(\"ngModelChange\", function CarteiraComponent_Template_mat_select_ngModelChange_21_listener($event) {\n        return ctx.ativoCompra = $event;\n      });\n      i0.ɵɵtemplate(22, CarteiraComponent_ng_container_22_Template, 2, 1, \"ng-container\", 2);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(23, \"button\", 6);\n      i0.ɵɵlistener(\"click\", function CarteiraComponent_Template_button_click_23_listener() {\n        return ctx.Comprar();\n      });\n      i0.ɵɵtext(24, \" Comprar \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(25, \"button\", 6);\n      i0.ɵɵlistener(\"click\", function CarteiraComponent_Template_button_click_25_listener() {\n        return ctx.Vender();\n      });\n      i0.ɵɵtext(26, \" Vender \");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelement(27, \"app-investimento\", 7)(28, \"app-investimento\", 7)(29, \"app-investimento\", 7)(30, \"app-investimento\", 7)(31, \"app-investimento\", 7)(32, \"app-investimento\", 7)(33, \"app-investimento\", 7);\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngModel\", ctx.__cliente__);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.ativos != null && ctx.ativos.length > 0);\n      i0.ɵɵadvance(1);\n      i0.ɵɵtextInterpolate1(\"\\n\", ctx.__cliente__, \"\\n\");\n      i0.ɵɵadvance(2);\n      i0.ɵɵtextInterpolate2(\"\", ctx.cliente, \", \", ctx.idade, \"\");\n      i0.ɵɵadvance(2);\n      i0.ɵɵtextInterpolate1(\"R$ \", i0.ɵɵpipeBind3(12, 23, ctx.saldo, \"1.2\", \"br\"), \"\");\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"ngModel\", ctx.valorCompra);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngModel\", ctx.ativoCompra);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.ativos != null && ctx.ativos.length > 0);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"investimentos\", ctx.fixa)(\"titulo\", \"Renda Fixa\");\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"investimentos\", ctx.variavel)(\"titulo\", \"Renda Vari\\u00E1vel\");\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"investimentos\", ctx.fundos)(\"titulo\", \"Fundos\");\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"investimentos\", ctx.acoes)(\"titulo\", \"A\\u00E7\\u00F5es\");\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"investimentos\", ctx.tesouro)(\"titulo\", \"Tesouro Direto\");\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"investimentos\", ctx.poupanca)(\"titulo\", \"Poupan\\u00E7a\");\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"investimentos\", ctx.cripto)(\"titulo\", \"Criptomoedas\");\n    }\n  },\n  styles: [\"mat-form-field[_ngcontent-%COMP%], button[_ngcontent-%COMP%] {\\n    margin-right: 20px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNhcnRlaXJhLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7SUFDSSxrQkFBa0I7QUFDdEIiLCJmaWxlIjoiY2FydGVpcmEuY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbIm1hdC1mb3JtLWZpZWxkLGJ1dHRvbiB7XG4gICAgbWFyZ2luLXJpZ2h0OiAyMHB4O1xufSJdfQ== */\"]\n});","map":{"version":3,"sources":["/home/caiolagana/Documents/dotNET/info-invest/ClientApp/src/app/carteira/carteira.component.ts"],"names":["registerLocaleData","localeBr","cgrupos","i0","i1","_c0","a0","a1","a2","nome","idade","saldo","CarteiraComponent_ng_container_6_mat_option_1_Template","rf","ctx","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","cliente_r3","$implicit","ɵɵproperty","ɵɵpureFunction3","ɵɵadvance","ɵɵtextInterpolate1","CarteiraComponent_ng_container_6_Template","ɵɵelementContainerStart","ɵɵtemplate","ɵɵelementContainerEnd","ctx_r0","ɵɵnextContext","clientes","_c1","grupo","CarteiraComponent_ng_container_22_mat_option_1_Template","ativo_r5","ctx_r4","ɵɵpureFunction2","codigoGrupo","ɵɵtextInterpolate2","CarteiraComponent_ng_container_22_Template","ctx_r1","ativos","CarteiraComponent","constructor","http","fixa","variavel","fundos","acoes","tesouro","poupanca","cripto","cliente","__cliente__","x","grupos","lista","valorCompra","ativoCompra","carregaCliente","recuperaInvestimentos","recuperaAtivos","recuperaSaldo","recuperaClientes","ngOnInit","get","subscribe","atualizaSaldo","cmd","postDB","r","parseFloat","recuperaInvestimento","Vender","venda","ativo","quantidade","valor","cmdSaldo","Comprar","compra","enviaCompra","toString","gr","cod","post","res","send","inv","somaSaldo","invs","soma","forEach","ɵfac","CarteiraComponent_Factory","t","ɵɵdirectiveInject","HttpClient","ɵcmp","ɵɵdefineComponent","type","selectors","decls","vars","consts","template","CarteiraComponent_Template","ɵɵlistener","CarteiraComponent_Template_mat_select_ngModelChange_5_listener","$event","ɵɵpipe","CarteiraComponent_Template_input_ngModelChange_17_listener","CarteiraComponent_Template_mat_select_ngModelChange_21_listener","CarteiraComponent_Template_button_click_23_listener","CarteiraComponent_Template_button_click_25_listener","ɵɵelement","length","ɵɵpipeBind3","styles"],"mappings":"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","sourcesContent":["import { registerLocaleData } from '@angular/common';\nimport localeBr from '@angular/common/locales/br';\nimport { cgrupos } from '../cadastro-ativos/cadastro-ativos.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nconst _c0 = function (a0, a1, a2) { return { nome: a0, idade: a1, saldo: a2 }; };\nfunction CarteiraComponent_ng_container_6_mat_option_1_Template(rf, ctx) { if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-option\", 9);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n} if (rf & 2) {\n    const cliente_r3 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", i0.ɵɵpureFunction3(2, _c0, cliente_r3.nome, cliente_r3.idade, cliente_r3.saldo));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", cliente_r3.nome, \" \");\n} }\nfunction CarteiraComponent_ng_container_6_Template(rf, ctx) { if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, CarteiraComponent_ng_container_6_mat_option_1_Template, 2, 6, \"mat-option\", 8);\n    i0.ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.clientes);\n} }\nconst _c1 = function (a0, a1) { return { nome: a0, grupo: a1 }; };\nfunction CarteiraComponent_ng_container_22_mat_option_1_Template(rf, ctx) { if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-option\", 9);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ativo_r5 = ctx.$implicit;\n    const ctx_r4 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"value\", i0.ɵɵpureFunction2(3, _c1, ativo_r5.nome, ctx_r4.codigoGrupo(ativo_r5.grupo)));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate2(\" \", ativo_r5.nome, \" / \", ativo_r5.grupo, \" \");\n} }\nfunction CarteiraComponent_ng_container_22_Template(rf, ctx) { if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, CarteiraComponent_ng_container_22_mat_option_1_Template, 2, 6, \"mat-option\", 8);\n    i0.ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.ativos);\n} }\nregisterLocaleData(localeBr, 'br');\nexport class CarteiraComponent {\n    constructor(http) {\n        this.http = http;\n        this.fixa = null;\n        this.variavel = null;\n        this.fundos = null;\n        this.acoes = null;\n        this.tesouro = null;\n        this.poupanca = null;\n        this.cripto = null;\n        this.clientes = [];\n        this.cliente = \"Ana Pereira\";\n        this.__cliente__ = null;\n        //nome = \"Ana Pereira\";\n        this.idade = 28;\n        this.saldo = 0;\n        this.x = new cgrupos();\n        this.grupos = this.x.lista;\n        this.ativos = [];\n        this.valorCompra = null;\n        this.ativoCompra = null;\n        this.carregaCliente();\n    }\n    carregaCliente() {\n        this.recuperaInvestimentos();\n        this.recuperaAtivos();\n        this.recuperaSaldo(this.cliente);\n        this.recuperaClientes();\n    }\n    ngOnInit() { }\n    recuperaClientes() {\n        this.http.get('clientes')\n            .subscribe(clientes => (this.clientes = clientes));\n    }\n    atualizaSaldo(saldo, cliente) {\n        let cmd = \"UPDATE clientes SET saldo = \" + saldo + \" WHERE nome = '\" + cliente + \"';\";\n        this.postDB([cmd, 'w']).subscribe(() => { });\n    }\n    recuperaSaldo(cliente) {\n        let cmd = \"SELECT saldo FROM clientes WHERE nome = '\" + cliente + \"';\";\n        this.postDB([cmd, 'r']).subscribe((r) => { this.saldo = parseFloat(r[0]); });\n    }\n    async recuperaInvestimentos() {\n        this.recuperaInvestimento('fixa', this.cliente);\n        this.recuperaInvestimento('variavel', this.cliente);\n        this.recuperaInvestimento('fundos', this.cliente);\n        this.recuperaInvestimento('acoes', this.cliente);\n        this.recuperaInvestimento('tesouro', this.cliente);\n        this.recuperaInvestimento('poupanca', this.cliente);\n        this.recuperaInvestimento('cripto', this.cliente);\n        //await new Promise(f => setTimeout(f, 500));\n        //this.atualizaSaldo(this.saldo.toString(), this.cliente!);\n        //console.log('saldo: ' + this.saldo);\n    }\n    Vender() {\n        if (this.ativoCompra != null && this.valorCompra != null) {\n            let venda = {\n                cliente: this.cliente,\n                ativo: this.ativoCompra.nome,\n                grupo: this.ativoCompra.grupo,\n                quantidade: 1,\n                valor: this.valorCompra\n            };\n            this.saldo -= venda.quantidade * venda.valor;\n            let cmdSaldo = \"UPDATE clientes SET saldo = \" + this.saldo + \" WHERE nome = '\" + this.cliente + \"';\";\n            this.postDB([cmdSaldo, 'w']).subscribe(() => { });\n            //let cmdAtivo: string =  \"UPDATE \" + venda.grupo + \" SET valor = \" + this.saldo + \" WHERE cliente = '\" + this.cliente + \"';\";\n        }\n    }\n    Comprar() {\n        if (this.ativoCompra != null && this.valorCompra != null) {\n            let compra = {\n                cliente: this.cliente,\n                ativo: this.ativoCompra.nome,\n                grupo: this.ativoCompra.grupo,\n                quantidade: 1,\n                valor: this.valorCompra\n            };\n            this.enviaCompra(compra).subscribe(() => {\n                this.recuperaInvestimento(this.ativoCompra.grupo, this.cliente);\n                this.saldo += compra.quantidade * compra.valor;\n                this.atualizaSaldo(this.saldo.toString(), this.cliente);\n                this.valorCompra = null;\n                this.ativoCompra = null;\n            });\n        }\n    }\n    codigoGrupo(gr) {\n        let cod = '';\n        switch (gr) {\n            case 'Renda Fixa':\n                cod = 'fixa';\n                break;\n            case 'Renda Variável':\n                cod = 'variavel';\n                break;\n            case 'Fundos':\n                cod = 'fundos';\n                break;\n            case 'Ações':\n                cod = 'acoes';\n                break;\n            case 'Tesouro Direto':\n                cod = 'tesouro';\n                break;\n            case 'Poupança':\n                cod = 'poupanca';\n                break;\n            case 'Criptomoedas':\n                cod = 'cripto';\n                break;\n        }\n        return cod;\n    }\n    enviaCompra(compra) {\n        return this.http.post('comprar', compra);\n    }\n    postDB(cmd) {\n        return this.http.post('db', cmd);\n    }\n    recuperaInvestimento(grupo, cliente) {\n        let res = null;\n        this.send(grupo, cliente).subscribe(inv => {\n            switch (grupo) {\n                case 'fixa':\n                    this.fixa = inv;\n                    break;\n                case 'variavel':\n                    this.variavel = inv;\n                    break;\n                case 'fundos':\n                    this.fundos = inv;\n                    break;\n                case 'acoes':\n                    this.acoes = inv;\n                    break;\n                case 'tesouro':\n                    this.tesouro = inv;\n                    break;\n                case 'poupanca':\n                    this.poupanca = inv;\n                    break;\n                case 'cripto':\n                    this.cripto = inv;\n                    break;\n            }\n        });\n    }\n    send(grupo, cliente) {\n        return this.http.post('carteira', [grupo, cliente]);\n    }\n    somaSaldo(invs) {\n        let soma = 0;\n        invs.forEach(inv => soma += inv.quantidade * inv.valor);\n        return soma;\n    }\n    recuperaAtivos() {\n        this.http.get('ativos')\n            .subscribe(ativos => (this.ativos = ativos));\n    }\n}\nCarteiraComponent.ɵfac = function CarteiraComponent_Factory(t) { return new (t || CarteiraComponent)(i0.ɵɵdirectiveInject(i1.HttpClient)); };\nCarteiraComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: CarteiraComponent, selectors: [[\"app-carteira\"]], decls: 34, vars: 27, consts: [[\"appearance\", \"fill\"], [\"name\", \"escolheClienteCompra\", 3, \"ngModel\", \"ngModelChange\"], [4, \"ngIf\"], [1, \"example-form\"], [\"matInput\", \"\", \"name\", \"valorCompra\", 3, \"ngModel\", \"ngModelChange\"], [\"name\", \"ativoCompra\", 3, \"ngModel\", \"ngModelChange\"], [1, \"btn\", \"btn-primary\", 3, \"click\"], [3, \"investimentos\", \"titulo\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [3, \"value\"]], template: function CarteiraComponent_Template(rf, ctx) { if (rf & 1) {\n        i0.ɵɵelementStart(0, \"h1\");\n        i0.ɵɵtext(1, \"Carteira do cliente\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(2, \"mat-form-field\", 0)(3, \"mat-label\");\n        i0.ɵɵtext(4, \"Cliente\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(5, \"mat-select\", 1);\n        i0.ɵɵlistener(\"ngModelChange\", function CarteiraComponent_Template_mat_select_ngModelChange_5_listener($event) { return ctx.__cliente__ = $event; });\n        i0.ɵɵtemplate(6, CarteiraComponent_ng_container_6_Template, 2, 1, \"ng-container\", 2);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵtext(7);\n        i0.ɵɵelementStart(8, \"h1\");\n        i0.ɵɵtext(9);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(10, \"h1\");\n        i0.ɵɵtext(11);\n        i0.ɵɵpipe(12, \"number\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(13, \"form\", 3)(14, \"mat-form-field\", 0)(15, \"mat-label\");\n        i0.ɵɵtext(16, \"Valor R$\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(17, \"input\", 4);\n        i0.ɵɵlistener(\"ngModelChange\", function CarteiraComponent_Template_input_ngModelChange_17_listener($event) { return ctx.valorCompra = $event; });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(18, \"mat-form-field\", 0)(19, \"mat-label\");\n        i0.ɵɵtext(20, \"Ativo\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(21, \"mat-select\", 5);\n        i0.ɵɵlistener(\"ngModelChange\", function CarteiraComponent_Template_mat_select_ngModelChange_21_listener($event) { return ctx.ativoCompra = $event; });\n        i0.ɵɵtemplate(22, CarteiraComponent_ng_container_22_Template, 2, 1, \"ng-container\", 2);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(23, \"button\", 6);\n        i0.ɵɵlistener(\"click\", function CarteiraComponent_Template_button_click_23_listener() { return ctx.Comprar(); });\n        i0.ɵɵtext(24, \" Comprar \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(25, \"button\", 6);\n        i0.ɵɵlistener(\"click\", function CarteiraComponent_Template_button_click_25_listener() { return ctx.Vender(); });\n        i0.ɵɵtext(26, \" Vender \");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelement(27, \"app-investimento\", 7)(28, \"app-investimento\", 7)(29, \"app-investimento\", 7)(30, \"app-investimento\", 7)(31, \"app-investimento\", 7)(32, \"app-investimento\", 7)(33, \"app-investimento\", 7);\n    } if (rf & 2) {\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngModel\", ctx.__cliente__);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.ativos != null && ctx.ativos.length > 0);\n        i0.ɵɵadvance(1);\n        i0.ɵɵtextInterpolate1(\"\\n\", ctx.__cliente__, \"\\n\");\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate2(\"\", ctx.cliente, \", \", ctx.idade, \"\");\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate1(\"R$ \", i0.ɵɵpipeBind3(12, 23, ctx.saldo, \"1.2\", \"br\"), \"\");\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"ngModel\", ctx.valorCompra);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngModel\", ctx.ativoCompra);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.ativos != null && ctx.ativos.length > 0);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"investimentos\", ctx.fixa)(\"titulo\", \"Renda Fixa\");\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"investimentos\", ctx.variavel)(\"titulo\", \"Renda Vari\\u00E1vel\");\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"investimentos\", ctx.fundos)(\"titulo\", \"Fundos\");\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"investimentos\", ctx.acoes)(\"titulo\", \"A\\u00E7\\u00F5es\");\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"investimentos\", ctx.tesouro)(\"titulo\", \"Tesouro Direto\");\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"investimentos\", ctx.poupanca)(\"titulo\", \"Poupan\\u00E7a\");\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"investimentos\", ctx.cripto)(\"titulo\", \"Criptomoedas\");\n    } }, styles: [\"mat-form-field[_ngcontent-%COMP%], button[_ngcontent-%COMP%] {\\n    margin-right: 20px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNhcnRlaXJhLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7SUFDSSxrQkFBa0I7QUFDdEIiLCJmaWxlIjoiY2FydGVpcmEuY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbIm1hdC1mb3JtLWZpZWxkLGJ1dHRvbiB7XG4gICAgbWFyZ2luLXJpZ2h0OiAyMHB4O1xufSJdfQ== */\"] });\n"]},"metadata":{},"sourceType":"module"}